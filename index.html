<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Encryption App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --dark-bg: #0f172a;
            --dark-card: #1e293b;
            --dark-card-light: #334155;
            --text-light: #f8fafc;
            --text-muted: #94a3b8;
            --warning: #f59e0b;
            --danger: #ef4444;
            --success: #10b981;
            --border-radius: 12px;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-bg);
            color: var(--text-light);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            background-image: radial-gradient(circle at 15% 50%, rgba(99, 102, 241, 0.1) 0%, transparent 20%),
                              radial-gradient(circle at 85% 30%, rgba(16, 185, 129, 0.1) 0%, transparent 20%);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Header */
        .app-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.9) 100%);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .app-header h1 {
            color: var(--text-light);
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .app-header h1 i {
            color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
            padding: 15px;
            border-radius: 50%;
        }

        .app-header p {
            color: var(--text-muted);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Status Bar */
        .status-bar {
            background: rgba(30, 41, 59, 0.8);
            padding: 15px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-left: 4px solid var(--primary);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .status-bar i {
            color: var(--primary);
            font-size: 1.2rem;
        }

        /* Main Card */
        .main-card {
            background: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .card-header {
            background: rgba(30, 41, 59, 0.9);
            padding: 20px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .card-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-header h2 i {
            color: var(--primary);
        }

        .card-body {
            padding: 30px;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-muted);
        }

        textarea, input {
            width: 100%;
            padding: 16px;
            background: var(--dark-card-light);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            color: var(--text-light);
            font-size: 1rem;
            transition: var(--transition);
            font-family: 'Inter', sans-serif;
        }

        textarea:focus, input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* Buttons */
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin: 25px 0;
        }

        .btn {
            padding: 14px 24px;
            border-radius: var(--border-radius);
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(99, 102, 241, 0.3);
        }

        .btn-secondary {
            background: var(--dark-card-light);
            color: var(--text-light);
        }

        .btn-secondary:hover {
            background: #475569;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #0da271;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #d97706;
            transform: translateY(-2px);
        }

        /* Result Area */
        .result-area {
            background: var(--dark-card-light);
            padding: 25px;
            border-radius: var(--border-radius);
            margin-top: 25px;
            border: 1px dashed rgba(255, 255, 255, 0.1);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .result-header h3 {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-header h3 i {
            color: var(--secondary);
        }

        #result {
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 8px;
            min-height: 80px;
            word-break: break-all;
            white-space: pre-wrap;
            color: #a5b4fc;
        }

        /* Security Note */
        .security-note {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(15, 23, 42, 0.9) 100%);
            padding: 25px;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--warning);
            margin-top: 30px;
        }

        .security-note h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--warning);
        }

        .security-note p {
            color: var(--text-muted);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .app-header h1 {
                font-size: 2rem;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .card-body {
                padding: 20px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="app-header fade-in">
            <h1><i class="fas fa-lock"></i> Secure Encryption App</h1>
            <p>Encrypt and decrypt text locally in your browser using advanced cryptographic algorithms</p>
        </header>
        
        <div id="status" class="status-bar fade-in">
            <i class="fas fa-info-circle"></i>
            <span>Ready to encrypt. All operations happen locally in your browser.</span>
        </div>
        
        <main class="main-card fade-in">
            <div class="card-header">
                <h2><i class="fas fa-edit"></i> Text Encryption & Decryption</h2>
            </div>
            
            <div class="card-body">
                <div class="form-group">
                    <label for="inputText"><i class="fas fa-font"></i> Text to Process</label>
                    <textarea id="inputText" rows="5" placeholder="Enter your text here...">This is a secret message that needs to be encrypted</textarea>
                </div>
                
                <div class="form-group">
                    <label for="encryptionKey"><i class="fas fa-key"></i> Encryption Key</label>
                    <input type="text" id="encryptionKey" placeholder="Enter a secure key or generate one..." value="MySecureKey123">
                </div>
                
                <div class="button-group">
                    <button class="btn btn-warning" onclick="generateKey()">
                        <i class="fas fa-key"></i> Generate Secure Key
                    </button>
                    <button class="btn btn-primary" onclick="encryptText()">
                        <i class="fas fa-lock"></i> Encrypt Text
                    </button>
                    <button class="btn btn-success" onclick="decryptText()">
                        <i class="fas fa-unlock"></i> Decrypt Text
                    </button>
                    <button class="btn btn-danger" onclick="clearAll()">
                        <i class="fas fa-trash-alt"></i> Clear All
                    </button>
                </div>
                
                <div class="result-area">
                    <div class="result-header">
                        <h3><i class="fas fa-code"></i> Result</h3>
                        <button class="btn btn-secondary" onclick="copyResult()">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                    <div id="result">Results will appear here after encryption or decryption...</div>
                </div>
            </div>
        </main>
        
        <div class="security-note fade-in">
            <h3><i class="fas fa-shield-alt"></i> Security & Privacy Information</h3>
            <p>All encryption and decryption operations are performed locally in your browser. Your encryption key and data never leave your device, ensuring maximum security. This application uses strong cryptographic algorithms for secure text transformation.</p>
        </div>
    </div>

    <!-- Load the JavaScript file -->
    <script src="app.js"></script>
    
    <!-- Fallback if app.js fails to load -->
    <script>
        // Check if app.js loaded properly
        setTimeout(() => {
            if (typeof encryptText !== 'function') {
                console.warn("app.js failed to load, using inline fallback");
                loadFallbackJS();
            }
        }, 1000);
        
        function loadFallbackJS() {
            // Update status
            const status = document.getElementById('status');
            status.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <span>Loaded basic functionality (app.js failed to load)</span>';
            status.style.borderLeftColor = 'var(--warning)';
            
            // Simple fallback functions
            window.generateKey = function() {
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';
                let key = '';
                for (let i = 0; i < 32; i++) {
                    key += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                document.getElementById('encryptionKey').value = key;
                
                // Update status
                status.innerHTML = '<i class="fas fa-check-circle"></i> <span>Secure key generated successfully!</span>';
                status.style.borderLeftColor = 'var(--success)';
            };
            
            window.encryptText = function() {
                const input = document.getElementById('inputText').value;
                const key = document.getElementById('encryptionKey').value;
                
                if (!input.trim()) {
                    status.innerHTML = '<i class="fas fa-exclamation-circle"></i> <span>Please enter text to encrypt</span>';
                    status.style.borderLeftColor = 'var(--danger)';
                    return;
                }
                
                // Simple "encryption" for demo purposes
                let result = '';
                for (let i = 0; i < input.length; i++) {
                    const charCode = input.charCodeAt(i) ^ key.charCodeAt(i % key.length);
                    result += String.fromCharCode(charCode);
                }
                
                // Convert to base64 to make it look encrypted
                const encodedResult = btoa(result);
                
                document.getElementById('result').textContent = encodedResult;
                status.innerHTML = '<i class="fas fa-check-circle"></i> <span>Text encrypted successfully (using fallback method)</span>';
                status.style.borderLeftColor = 'var(--success)';
            };
            
            window.decryptText = function() {
                const input = document.getElementById('inputText').value;
                const key = document.getElementById('encryptionKey').value;
                
                if (!input.trim()) {
                    status.innerHTML = '<i class="fas fa-exclamation-circle"></i> <span>Please enter text to decrypt</span>';
                    status.style.borderLeftColor = 'var(--danger)';
                    return;
                }
                
                try {
                    // Try to decode from base64
                    const decodedInput = atob(input);
                    
                    // Simple "decryption" for demo purposes
                    let result = '';
                    for (let i = 0; i < decodedInput.length; i++) {
                        const charCode = decodedInput.charCodeAt(i) ^ key.charCodeAt(i % key.length);
                        result += String.fromCharCode(charCode);
                    }
                    
                    document.getElementById('result').textContent = result;
                    status.innerHTML = '<i class="fas fa-check-circle"></i> <span>Text decrypted successfully (using fallback method)</span>';
                    status.style.borderLeftColor = 'var(--success)';
                } catch (e) {
                    document.getElementById('result').textContent = 'Error: Invalid encrypted text format';
                    status.innerHTML = '<i class="fas fa-exclamation-circle"></i> <span>Decryption failed - invalid format</span>';
                    status.style.borderLeftColor = 'var(--danger)';
                }
            };
            
            window.clearAll = function() {
                document.getElementById('inputText').value = '';
                document.getElementById('encryptionKey').value = '';
                document.getElementById('result').textContent = 'Results will appear here after encryption or decryption...';
                status.innerHTML = '<i class="fas fa-info-circle"></i> <span>All fields cleared. Ready for new input.</span>';
                status.style.borderLeftColor = 'var(--primary)';
            };
            
            window.copyResult = function() {
                const resultText = document.getElementById('result').textContent;
                if (resultText && resultText !== 'Results will appear here after encryption or decryption...') {
                    navigator.clipboard.writeText(resultText)
                        .then(() => {
                            // Show temporary success message
                            const copyBtn = document.querySelector('.btn-secondary');
                            const originalHTML = copyBtn.innerHTML;
                            copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                            copyBtn.style.background = 'var(--success)';
                            
                            setTimeout(() => {
                                copyBtn.innerHTML = originalHTML;
                                copyBtn.style.background = '';
                            }, 2000);
                        })
                        .catch(err => {
                            console.error('Failed to copy: ', err);
                        });
                }
            };
        }
    </script>
</body>
</html>
